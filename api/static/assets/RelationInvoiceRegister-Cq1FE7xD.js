import{d as k,r as d,f as x,e as u,c as s,a,b as c,n as m,F as v,m as p,p as M,v as S,l as U,u as V,o as l,t as r}from"./index-16rCab_c.js";const q={CELESC:"CELESC"},I={class:"container mt-5"},L={class:"mb-3"},h=["value"],B={class:"mb-3"},F=["value"],$={class:"mb-3"},D=["value"],w={class:"mb-3"},N=k({__name:"RelationInvoiceRegister",setup(z){const g=U(),R=V(),i=d(g.params.id),b=d([]),f=d([]),n=d({company:"",unit_number:"",resident:"",place:""});function y(){u.get(`/place/${n.value.place}/residents/`).then(t=>{f.value=t.data}).catch(t=>{console.error("Erro ao obter a lista de moradores:",t)})}function C(){u.post("/invoice/relation-invoices/",n.value).then(({data:t})=>{i.value=t.id,R.push({name:"relacao-fatura-lista",params:{id:t.id}})})}function E(){u.put(`/invoice/relation-invoices/${i.value}/`,n.value)}return x(()=>{u.get("/place/unions/").then(t=>{b.value=t.data}).catch(t=>{console.error("Erro ao obter a lista de locais:",t)}),i.value&&u.get(`/invoice/relation-invoices/${i.value}/`).then(t=>{n.value=t.data,y()}).catch(t=>{console.error("Erro ao obter os detalhes do local:",t)})}),(t,o)=>(l(),s("div",I,[o[8]||(o[8]=a("h1",{class:"text-center"},"Registrar relação de fatura:",-1)),a("div",L,[o[4]||(o[4]=a("label",{for:"company_invoice",class:"form-label"},"Empresa emissora da fatura:",-1)),c(a("select",{class:"form-control",id:"company_invoice","onUpdate:modelValue":o[0]||(o[0]=e=>n.value.company=e),required:""},[(l(!0),s(v,null,p(M(q),(e,_)=>(l(),s("option",{key:_,value:_},r(e),9,h))),128))],512),[[m,n.value.company]])]),a("div",B,[o[5]||(o[5]=a("label",{for:"place",class:"form-label"},"Lugar:",-1)),c(a("select",{class:"form-control",id:"place","onUpdate:modelValue":o[1]||(o[1]=e=>n.value.place=e),onChange:y,required:""},[(l(!0),s(v,null,p(b.value,e=>(l(),s("option",{key:e.id,value:e.id},r(e.name)+" - "+r(e.street)+", "+r(e.number)+", "+r(e.city)+" - "+r(e.state),9,F))),128))],544),[[m,n.value.place]])]),a("div",$,[o[6]||(o[6]=a("label",{for:"resident",class:"form-label"},"Morador:",-1)),c(a("select",{class:"form-control",id:"resident","onUpdate:modelValue":o[2]||(o[2]=e=>n.value.resident=e),required:""},[(l(!0),s(v,null,p(f.value,e=>(l(),s("option",{key:e.id,value:e.id},r(e.username)+" - "+r(e.email),9,D))),128))],512),[[m,n.value.resident]])]),a("div",w,[o[7]||(o[7]=a("label",{for:"city",class:"form-label"},"Unidade condumidora:",-1)),c(a("input",{type:"text",class:"form-control",id:"city","onUpdate:modelValue":o[3]||(o[3]=e=>n.value.unit_number=e),required:""},null,512),[[S,n.value.unit_number]])]),i.value?(l(),s("button",{key:1,onClick:E,class:"btn btn-primary mx-3"},"Atualizar")):(l(),s("button",{key:0,onClick:C,class:"btn btn-primary"},"Cadastrar"))]))}});export{N as default};
