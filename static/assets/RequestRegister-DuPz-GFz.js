import{d as R,r as p,f as g,e as u,c as r,a as t,b as d,n as v,F as k,m as x,v as c,l as M,u as U,o as i,t as n}from"./index-CEv88vVO.js";const C={class:"container mt-5"},E={class:"mb-3"},O=["value"],T={class:"mb-3"},V={class:"mb-3"},A={class:"mb-3"},F=R({__name:"RequestRegister",setup(B){const b=M(),f=U(),a=p(b.params.id),m=p([]),s=p({place:null,title:"",description:"",type:null});function y(){u.post("/request/",s.value).then(({data:l})=>{a.value=l.id,f.push({name:"requisicao_editar",params:{id:l.id}})})}function q(){u.put(`/request/${a.value}/`,s.value)}return g(()=>{u.get("/place/residents/").then(l=>{m.value=l.data}).catch(l=>{console.error("Erro ao obter a lista de locais:",l)}),a.value&&u.get(`/request/${a.value}/`).then(l=>{s.value=l.data}).catch(l=>{console.error("Erro ao obter o chamado:",l)})}),(l,e)=>(i(),r("div",C,[e[9]||(e[9]=t("h1",{class:"text-center"},"Registrar chamado",-1)),t("div",E,[e[4]||(e[4]=t("label",{for:"place",class:"form-label"},"Local:",-1)),d(t("select",{class:"form-control",id:"place","onUpdate:modelValue":e[0]||(e[0]=o=>s.value.place=o),required:""},[(i(!0),r(k,null,x(m.value,o=>(i(),r("option",{key:o.id,value:o.id},n(o.name)+" - "+n(o.street)+", "+n(o.number)+", "+n(o.city)+" - "+n(o.state),9,O))),128))],512),[[v,s.value.place]])]),t("div",T,[e[5]||(e[5]=t("label",{for:"title",class:"form-label"},"Título:",-1)),d(t("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":e[1]||(e[1]=o=>s.value.title=o),required:""},null,512),[[c,s.value.title]])]),t("div",V,[e[6]||(e[6]=t("label",{for:"description",class:"form-label"},"Descrição:",-1)),d(t("textarea",{class:"form-control",id:"description","onUpdate:modelValue":e[2]||(e[2]=o=>s.value.description=o),rows:"3",required:""},null,512),[[c,s.value.description]])]),t("div",A,[e[8]||(e[8]=t("label",{for:"type",class:"form-label"},"Tipo:",-1)),d(t("select",{class:"form-control",id:"type","onUpdate:modelValue":e[3]||(e[3]=o=>s.value.type=o),required:""},e[7]||(e[7]=[t("option",{value:"R"},"RECLAMAÇÃO",-1),t("option",{value:"M"},"MANUTENÇÃO",-1),t("option",{value:"O"},"OUTROS",-1)]),512),[[v,s.value.type]])]),a.value?(i(),r("button",{key:1,onClick:q,class:"btn btn-primary mx-3"},"Atualizar")):(i(),r("button",{key:0,onClick:y,class:"btn btn-primary"},"Cadastrar"))]))}});export{F as default};
